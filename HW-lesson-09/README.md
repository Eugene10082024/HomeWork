## ДЗ к Занятию 9

### Написать скрипт для крона, который раз в час присылает на заданную почту

  X IP адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта
  
  Y запрашиваемых адресов (с наибольшим кол-вом запросов) с указанием кол-ва запросов c момента последнего запуска скрипта
  
  все ошибки c момента последнего запуска
  
  список всех кодов возврата с указанием их кол-ва с момента последнего запуска
  
в письме должно быть прописан обрабатываемый временной диапазон, должна быть реализована защита от мультизапуска.

## Выполнение ДЗ
Для выполнения ДЗ разработам скрипт logs-nginx.sh (dop_files/logs-nginx.sh). Также в данном каталоге лежит файл access.log
неоходимый для поверки работы скрипта.

### Для правильной работы скрипта в нем онеобходимо задать следующие переменные:

    file_log - указывается местонахождение и имя файла access.logs nginx для проведения анализа (пример - /var/log/access.log). 
    По умолчанию файл будет помещен в тот же каталог где будет размещен скрипт через Vagrantfile
  
    file_rez - указывается местонахождение и имя файла куда помещаются результаты анализа.
    По умолчанию файл будет помещен в тот же каталог где будет размещен скрипт через Vagrantfile
  
    file_numline - указывается файл в котором размещен номер строки с которой продолжается выполнение анализа. 
    Данный файл создается при первом запуске скрипта и в него помещается значение 0 
  
    sendaddress - указывается почтовый ящик пользователя на который будет направлен результат проведенного анализа.
  
  По умолчанию в скрипте указаны следующие значения:
  
    file_log=access.log
    file_rez=rezult.log
    file_numline=numline
    sendaddress="root@localhost"
    
### Проверка работы скрипта
  Для проверки работы скрипта необходимо выполнить следующие действия:
  
   1. Скачать файл vagrantfile
   2. Выполнить развертывание виртуальной машины выполним команду 
        ### vagrant up
   4. После развертывания виртуальной машины, войти на нее по ssh - vagrant ssh
   5. Перейти в каталог sudo /root/scripts
   6. Запустить скрипт sudo ./logs-nginx.sh
   7. Открыть файл результатов -sudo less rezult.log. Содержание файла приведено ниже.

### Настройка работы скрипта через cron



    
     
   
  


